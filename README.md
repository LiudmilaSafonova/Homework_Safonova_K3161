# Лабораторная работа - Контроль/мониторинг ресурсов
## Введение
Мониторинг процессов позволяет отслеживать показатели центрального процессора, памяти, диска, т.е. узнать использование ресурсов компьютера.

1. Чтобы узнать, насколько загружен процессор, и какие процессы потребляют больше ресурсов, можно ввести команду:
```
top
```
Запишите ID (PID) процесса, который потребляет больше всего ресурсов, и уровень загрузки процессора в процентах.

2. Узнайте объем свободной памяти с помощью команды ```free -m``` и запишите его.
3. Командой ```iostat``` посмотрите состояние диска. Чтобы отображение было динамическим, введите команду ```iostat 1```.
4. Изучите командой ```ss -l``` состояние сети.

## Создание стресс-ситуаций и их решение
### Работа с CPU
1. Установите stress на виртуальную машину.
2. В другом окне терминала запустите stress.
3. Посмотрите, как это сказывается на загрузке процессора.
4. Узнайте идентификатор процесса и командой 
```
kill <PID>
```
завершите его.

### Работа с диском
1. Чтобы оценить, как работает диск в стрессовой ситуации нужно будет создать большой файл. Этим создается большая нагрузка на систему ввода/вывода.
```
dd if=/dev/zero of=/tmp/testfile bs=1M count=5000 oflag=direct
```
2. В другом окне терминала оцените состояние диска. Это можно сделать так
```
iotop
```
3. Сделате так, чтобы в таблице отображался PID и завершите этот процесс.
4. Завершите процесс командой
```
kill <PID>
```

Но как узнать какой файл создается?
1. Повторно начните создание файла.
2. C помощью команды ```fatrace``` установите, куда сохранится файл.
3. Удалите его
```
rm <маршрут до файла>
```

### Узнать скорость соединения между двумя виртуальными машинами

Для работы потребуется установить iperf3 на обе виртуальные машины. iperf3 генерирует сетевой трафик.
Одна из ВМ будет пользовательской, а другая - серверной.

1. На серверной ВМ запускаем сервер  
```
iperf3 -s
```
2. Клиентская ВМ
```
iperf3 -c <IP адрес серверной ВМ> -t 60 -b 100G
```
3. Следующими командами посмотрите сетевую активность из клиентской ВМ (можно и из серверной).
* Просмотр количества полученных и переданных данных по протоколу TCP
```
watch -d "ss | grep tcp"
```
* Красивая утилита
```
iftop
```
Этими командами видим с какого на какой адрес переданы данные, а также узнаем объем этих данных.

## Возможности
В заключение хочется сказать, что существует большое количество команд, которые помогают управлять ресурсами и отслеживать их. В лабораторной работе была рассмотрена лишь малая часть. На схеме представлены многие другие команды для мониторинга производительности Linux.
![photo_2024-12-24_20-35-12](https://github.com/user-attachments/assets/e600cfa6-f8e7-4cb4-b9b0-050467542051)


## Использованные источники
1. [Документация top](https://man7.org/linux/man-pages/man1/top.1.html)
2. [Руководство по команде free](https://man7.org/linux/man-pages/man1/free.1.html)
3. [Документация iostat (sysstat)](https://man7.org/linux/man-pages/man5/sysstat.5.html)
4. [Команда ss](https://www.commandlinux.com/man-page/man8/ss.8.html)
5. [Пакет stress](https://www.geeksforgeeks.org/linux-stress-command-with-examples/)
6. [Команда dd](https://habr.com/ru/articles/117050/)
7. [Команда iotop](https://www.geeksforgeeks.org/iotop-command-in-linux-with-examples/)
8. [Iperf3](https://iperf.fr/)
