# Лабораторная работа - Контроль/мониторинг ресурсов
## Введение
Мониторинг процессов позволяет отслеживать показатели центрального процессора, памяти, диска, т.е. узнать использование ресурсов компьютера.

1. Чтобы узнать, насколько загружен процессор, и какие процессы потребляют больше ресурсов, можно ввести команду:
```
top
```
Запишите ID (PID) процесса, который потребляет больше всего ресурсов, и уровень загрузки процессора в процентах.

2. Узнайте объем свободной памяти с помощью команды ```free -m``` и запишите его.
3. Командой ```iostat``` посмотрите состояние диска. Чтобы отображение было динамическим введите команду ```iostat 1```.
4. Изучите командой ```ss -l``` состояние сети.

## Создание стресс-ситуаций и их решение
### Работа с CPU
1. Установите stress на виртуальную машину.
2. В другом окне терминала начниете stress.
3. Посмотрите, как это сказывается на работе процессора.
4. Узнайте идентификатор процесса и командой 
```
kill <PID>
```
завершите его

### Работа с диском
1. Чтобы оценить, как работает диск в стрессовой ситуации нужно будет создать большой файл. Этим создается большая нагрузка на систему ввода/вывода.
```
dd if=/dev/zero of=/tmp/testfile bs=1M count=5000 oflag=direct
```
2. В другом окне терминала оцените состояние диска. Это можно сделать так
```
iotop
```
3. Сделате так, чтобы в таблице показывало PID и завершите этот процесс.
4. Завершите процесс командой
```
kill <PID>
```

Но как узнать какой файл создается?
1. Повторно начните создание файла.
2. C помощью команды ```fatrace``` установите, куда сохранятся файл.
3. Удалите его
```
rm <маршрут до файла>
```

### Узнать скорость соединения между двумя виртуальными машинами

Для работы потребуется установить iperf3 на обе виртуальные машины. iperf3 генерирует сетевой трафик.
Одна из ВМ будет пользовательской, а другая - серверной.

1. На серверной ВМ запускаем сервер  
```
iperf3 -s
```
2. Клиентская ВМ
```
iperf3 -c <IP адрес серверной ВМ> -t 60 -b 100G
```
3. Следующими командами посмотрите сетевую активность

## Использованные источники
1. [Документация top](https://man7.org/linux/man-pages/man1/top.1.html)
2. [Руководство по команде free](https://man7.org/linux/man-pages/man1/free.1.html)
